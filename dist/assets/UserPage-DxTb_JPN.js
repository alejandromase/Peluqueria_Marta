import{d as A,n as z,c as u,o as c,b as e,e as V,A as F,s as d,t as n,z as L,l as $,p as j,m as E,k as _,v as B,j as G,F as T,g as M,B as de,h as I,x as ue,y as k,C as U,i as ce}from"./index-BA74HKjY.js";import{u as me,Q as pe,d as ge}from"./main-XVvhKl-Z.js";import{a as P,f as q}from"./dateUtils-BYq8WvRe.js";import{g as ve,a as xe,d as be}from"./services.actions-BkcyhOfq.js";import{g as ye,a as fe}from"./appointments.actions-CL9ypuyA.js";const he={class:"bg-white rounded-lg shadow-lg overflow-hidden mb-8"},we={class:"p-8"},_e={class:"flex items-center mb-6"},ke={class:"text-xl font-semibold text-gray-900"},$e={class:"text-gray-500"},De={class:"border-t border-gray-200 pt-6"},Ce={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Te={class:"text-gray-900 h-7"},Me={class:"text-gray-900 h-7"},Ve={class:"text-gray-900 h-7"},Se={class:"text-gray-900 h-7"},Be={class:"text-gray-900 h-7"},Ae={class:"text-gray-900 h-7"},He={class:"text-gray-900 h-7"},Ne={class:"text-gray-900 h-7"},je=A({__name:"UserProfile",setup(H){const{user:v}=z();return(p,r)=>{var m,b,x,h,w,f,a,l,o,i,y;return c(),u("div",he,[e("div",we,[r[9]||(r[9]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-6"},"Mi perfil",-1)),e("div",_e,[V(F,{"full-name":(m=d(v))==null?void 0:m.fullName,class:"text-2xl h-20 w-20 mr-4"},null,8,["full-name"]),e("div",null,[e("h3",ke,n((b=d(v))==null?void 0:b.fullName),1),e("p",$e,n((x=d(v))==null?void 0:x.email),1)])]),e("div",De,[r[8]||(r[8]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Información de contacto",-1)),e("div",Ce,[e("div",null,[r[0]||(r[0]=e("p",{class:"text-sm text-gray-500"},"Nombre completo",-1)),e("p",Te,n((h=d(v))==null?void 0:h.fullName),1)]),e("div",null,[r[1]||(r[1]=e("p",{class:"text-sm text-gray-500"},"Email",-1)),e("p",Me,n((w=d(v))==null?void 0:w.email),1)]),e("div",null,[r[2]||(r[2]=e("p",{class:"text-sm text-gray-500"},"Teléfono",-1)),e("p",Ve,n(((f=d(v))==null?void 0:f.phone)||"No proporcionado"),1)]),e("div",null,[r[3]||(r[3]=e("p",{class:"text-sm text-gray-500"},"Rol",-1)),e("p",Se,n((a=d(v))==null?void 0:a.roles.join(", ")),1)]),e("div",null,[r[4]||(r[4]=e("p",{class:"text-sm text-gray-500"},"Dirección",-1)),e("p",Be,n((l=d(v))==null?void 0:l.address_street),1)]),e("div",null,[r[5]||(r[5]=e("p",{class:"text-sm text-gray-500"},"Ciudad",-1)),e("p",Ae,n((o=d(v))==null?void 0:o.address_city),1)]),e("div",null,[r[6]||(r[6]=e("p",{class:"text-sm text-gray-500"},"Provincia",-1)),e("p",He,n((i=d(v))==null?void 0:i.address_state),1)]),e("div",null,[r[7]||(r[7]=e("p",{class:"text-sm text-gray-500"},"Código Postal",-1)),e("p",Ne,n((y=d(v))==null?void 0:y.address_postal_code),1)])])])])])}}}),Ue={class:"bg-white rounded-lg shadow-lg overflow-hidden mb-8"},Ee={class:"p-8"},Re={class:"mb-8 p-4 bg-gray-50 rounded-lg"},ze={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Pe={class:"space-y-4"},qe={class:"grid grid-cols-2 gap-4"},Fe={class:"space-y-4"},Le={class:"grid grid-cols-2 gap-4"},Ge={class:"mb-8 p-4 bg-gray-50 rounded-lg"},Ie={class:"flex flex-wrap gap-4 justify-between"},Qe=["id","onUpdate:modelValue"],We=["for"],Je={class:"grid grid-cols-1 md:grid-cols-2 gap-8"},Oe={class:"flex flex-col items-center p-4"},Ke={class:"mt-4 flex flex-col space-y-6"},Xe={class:"flex flex-col space-y-3"},Ye={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3"},Ze={class:"flex space-x-3"},et={key:0,class:"mt-4 w-full"},tt={class:"flex flex-wrap gap-2"},st={class:"mb-4"},ot={class:"border-b border-gray-200"},rt={class:"-mb-px flex space-x-8","aria-label":"Tabs"},at=["onClick"],lt={class:"space-y-2 max-h-96 overflow-y-auto pr-2"},nt={class:"flex items-center space-x-2"},it={class:"text-gray-700 font-medium"},dt={class:"text-sm text-gray-500"},ut=["onClick"],ct=A({__name:"AdminCalendar",setup(H){const v=L(),p=$("full"),{selectedDate:r,selectedDates:m,loadSlots:b,workHours:x,updateWorkHours:h,restDays:w,updateRestDays:f,loadRestDays:a,isDayDisabled:l,blockedDates:o,saveBlockedDates:i,loadBlockedDates:y,minDate:S,removeBlockedDate:Q}=me(),W=[{key:"monday",label:"Lunes"},{key:"tuesday",label:"Martes"},{key:"wednesday",label:"Miércoles"},{key:"thursday",label:"Jueves"},{key:"friday",label:"Viernes"},{key:"saturday",label:"Sábado"},{key:"sunday",label:"Domingo"}],J=g=>{if(Array.isArray(g))m.value=g.map(t=>q(t));else if(g){const t=q(g),s=m.value.indexOf(t);s===-1?m.value.push(t):m.value.splice(s,1)}},O=async()=>{if(m.value.length>0)if(p.value==="available"){const g=o.value.filter(s=>m.value.includes(s.date)),t=await ge(g);return t&&(m.value=[],r.value=null,await y()),t}else{const g=m.value.map(s=>({date:s,blockType:p.value})),t=await i(g);return t&&(m.value=[],r.value=null,await y()),t}return!1},K=()=>{m.value=[],r.value=null},X=async()=>{await h(x.value)&&(v.success("Horarios actualizados"),await b())},Y=async()=>{await f(w.value),v.success("Días de descanso actualizados")},Z=async g=>{await Q(g)},ee=j(()=>o.value.map(g=>{const[t,s,D]=g.date.split("-").map(Number),N=new Date(D,s-1,t);let C="red";return g.blockType==="morning"?C="yellow":g.blockType==="afternoon"&&(C="orange"),{date:N,type:"line",color:C,tooltip:[{text:g.blockType==="full"?"Día completo bloqueado":g.blockType==="morning"?"Mañana bloqueada":"Tarde bloqueada",color:C}]}})),te=j(()=>[...o.value].sort((g,t)=>{const[s,D,N]=g.date.split("-").map(Number),[C,ae,le]=t.date.split("-").map(Number),ne=new Date(N,D-1,s),ie=new Date(le,ae-1,C);return ne.getTime()-ie.getTime()})),se=g=>{switch(g){case"full":return"bg-red-50 border-red-100 hover:bg-red-100";case"morning":return"bg-yellow-50 border-yellow-100 hover:bg-yellow-100";case"afternoon":return"bg-orange-50 border-orange-100 hover:bg-orange-100"}},R=$("upcoming"),oe=[{name:"upcoming",label:"Próximos"},{name:"past",label:"Pasados"}],re=j(()=>{const g=new Date;return g.setHours(0,0,0,0),te.value.filter(t=>{const[s,D,N]=t.date.split("-").map(Number),C=new Date(N,D-1,s);return R.value==="upcoming"?C>=g:C<g})});return E(()=>{b(),a()}),(g,t)=>(c(),u("div",Ue,[e("div",Ee,[t[27]||(t[27]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-6"},"Gestión de disponibilidad",-1)),e("div",Re,[t[15]||(t[15]=e("h3",{class:"text-lg font-semibold mb-4"},"Configuración de horarios",-1)),e("div",ze,[e("div",Pe,[t[11]||(t[11]=e("h4",{class:"text-md font-medium text-gray-700"},"Horario de mañana",-1)),e("div",qe,[e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Hora de inicio",-1)),_(e("input",{type:"time","onUpdate:modelValue":t[0]||(t[0]=s=>d(x).morningStart=s),class:"bg-white w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[B,d(x).morningStart]])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Hora de fin (de jornada)",-1)),_(e("input",{type:"time","onUpdate:modelValue":t[1]||(t[1]=s=>d(x).morningEnd=s),class:"bg-white w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[B,d(x).morningEnd]])])])]),e("div",Fe,[t[14]||(t[14]=e("h4",{class:"text-md font-medium text-gray-700"},"Horario de tarde",-1)),e("div",Le,[e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Hora de inicio",-1)),_(e("input",{type:"time","onUpdate:modelValue":t[2]||(t[2]=s=>d(x).afternoonStart=s),class:"bg-white w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[B,d(x).afternoonStart]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Hora de fin (de jornada)",-1)),_(e("input",{type:"time","onUpdate:modelValue":t[3]||(t[3]=s=>d(x).afternoonEnd=s),class:"bg-white w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[B,d(x).afternoonEnd]])])])])]),e("div",{class:"mt-4"},[e("button",{onClick:X,class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700"}," Guardar horarios ")])]),e("div",Ge,[t[17]||(t[17]=e("h3",{class:"text-lg font-semibold mb-4"},"Días de descanso semanales del año",-1)),e("form",{onSubmit:G(Y,["prevent"]),class:"space-y-4"},[e("div",Ie,[(c(),u(T,null,M(W,s=>e("div",{key:s.key,class:"flex items-center"},[_(e("input",{type:"checkbox",id:s.key,"onUpdate:modelValue":D=>d(w)[s.key]=D,class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,8,Qe),[[de,d(w)[s.key]]]),e("label",{for:s.key,class:"ml-2 block text-sm text-gray-900"},n(s.label),9,We)])),64))]),t[16]||(t[16]=e("div",{class:"mt-4"},[e("button",{type:"submit",class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700"}," Guardar días de descanso ")],-1))],32)]),e("div",Je,[e("div",null,[t[24]||(t[24]=e("h3",{class:"text-lg font-semibold mb-4"},"Calendario",-1)),e("div",Oe,[e("div",null,[V(d(pe),{modelValue:d(r),"onUpdate:modelValue":[t[4]||(t[4]=s=>ue(r)?r.value=s:null),J],"disabled-dates":d(l),markers:ee.value,inline:!0,"monday-first":!0,"enable-time-picker":!1,"auto-apply":!0,"multi-dates":!0,"multi-dates-limit":10,"min-date":d(S),locale:"es",class:"p-4"},null,8,["modelValue","disabled-dates","markers","min-date"])]),e("div",Ke,[e("div",Xe,[t[22]||(t[22]=e("h4",{class:"text-sm font-medium text-gray-700"},"Selecciona el tipo de bloqueo:",-1)),e("div",Ye,[e("label",{class:k(["relative flex items-center p-3 rounded-lg border-2 cursor-pointer transition-all duration-200 hover:shadow-md group min-h-[60px]",[p.value==="full"?"border-red-500 bg-red-50":"border-gray-200 hover:border-red-200"]])},[_(e("input",{type:"radio","onUpdate:modelValue":t[5]||(t[5]=s=>p.value=s),value:"full",class:"sr-only"},null,512),[[U,p.value]]),t[18]||(t[18]=e("div",{class:"flex justify-center w-full"},[e("span",{class:"font-medium text-gray-700 text-sm text-center"},"Todo el día")],-1))],2),e("label",{class:k(["relative flex items-center p-3 rounded-lg border-2 cursor-pointer transition-all duration-200 hover:shadow-md group min-h-[60px]",[p.value==="morning"?"border-yellow-500 bg-yellow-50":"border-gray-200 hover:border-yellow-200"]])},[_(e("input",{type:"radio","onUpdate:modelValue":t[6]||(t[6]=s=>p.value=s),value:"morning",class:"sr-only"},null,512),[[U,p.value]]),t[19]||(t[19]=e("div",{class:"flex justify-center w-full"},[e("span",{class:"font-medium text-gray-700 text-sm text-center"},"Mañana")],-1))],2),e("label",{class:k(["relative flex items-center p-3 rounded-lg border-2 cursor-pointer transition-all duration-200 hover:shadow-md group min-h-[60px]",[p.value==="afternoon"?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-orange-200"]])},[_(e("input",{type:"radio","onUpdate:modelValue":t[7]||(t[7]=s=>p.value=s),value:"afternoon",class:"sr-only"},null,512),[[U,p.value]]),t[20]||(t[20]=e("div",{class:"flex justify-center w-full"},[e("span",{class:"font-medium text-gray-700 text-sm text-center"},"Tarde")],-1))],2),e("label",{class:k(["relative flex items-center p-3 rounded-lg border-2 cursor-pointer transition-all duration-200 hover:shadow-md group min-h-[60px]",[p.value==="available"?"border-green-500 bg-green-50":"border-gray-200 hover:border-green-200"]])},[_(e("input",{type:"radio","onUpdate:modelValue":t[8]||(t[8]=s=>p.value=s),value:"available",class:"sr-only"},null,512),[[U,p.value]]),t[21]||(t[21]=e("div",{class:"flex w-full justify-center"},[e("span",{class:"font-medium text-gray-700 text-sm text-center"},"Hacer disponibles")],-1))],2)])]),e("div",Ze,[e("button",{onClick:O,class:k(["px-6 py-2.5 rounded-md transition-colors duration-200 font-medium",[p.value==="available"?"bg-green-600 hover:bg-green-700 text-white":"bg-indigo-600 hover:bg-indigo-700 text-white"]])},n(p.value==="available"?"Hacer disponibles":"Marcar como no disponibles"),3),e("button",{onClick:K,class:"px-6 py-2.5 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 transition-colors duration-200 font-medium"}," Limpiar selección ")])]),d(m).length>0?(c(),u("div",et,[t[23]||(t[23]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Días seleccionados:",-1)),e("div",tt,[(c(!0),u(T,null,M(d(m),s=>(c(),u("span",{key:s,class:"px-2 py-1 bg-indigo-100 text-indigo-800 rounded-md text-sm"},n(s),1))),128))])])):I("",!0)])]),e("div",null,[t[26]||(t[26]=e("h3",{class:"text-lg font-semibold mb-4"},"Días no disponibles",-1)),e("div",st,[e("div",ot,[e("nav",rt,[(c(),u(T,null,M(oe,s=>e("button",{key:s.name,onClick:D=>R.value=s.name,class:k([R.value===s.name?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])},n(s.label),11,at)),64))])])]),e("div",lt,[(c(!0),u(T,null,M(re.value,s=>(c(),u("div",{key:s.id,class:k(["flex items-center justify-between p-3 rounded-lg border transition-colors duration-200",se(s.blockType)])},[e("div",nt,[e("span",it,n(d(P)(s.date)),1),e("span",dt," ("+n(s.blockType==="full"?"Todo el día":s.blockType==="morning"?"Mañana":"Tarde")+") ",1)]),e("button",{onClick:D=>Z(s),class:"text-red-600 hover:text-red-800 transition-colors duration-200"},t[25]||(t[25]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)]),8,ut)],2))),128))])])])])]))}}),mt={class:"bg-white rounded-lg shadow-lg overflow-hidden mb-8"},pt={class:"p-8"},gt={class:"mb-8 p-6 bg-gray-50 rounded-lg"},vt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},xt={class:"overflow-x-auto"},bt={class:"min-w-full divide-y divide-gray-200"},yt={class:"bg-white divide-y divide-gray-200"},ft={class:"px-3 sm:px-6 py-4 text-sm font-medium text-gray-900"},ht={class:"max-w-[200px] sm:max-w-none truncate"},wt={class:"px-3 sm:px-6 py-4 text-sm text-gray-500 whitespace-nowrap"},_t={class:"px-3 sm:px-6 py-4 text-sm font-medium"},kt=["onClick"],$t=A({__name:"ServiceManagement",setup(H){const v=L(),p=$([]),r=ce({description:"",duration:0}),m=f=>{const a=Math.floor(f/60),l=f%60;return a===0?`${l} minutos`:l===0?`${a} ${a===1?"hora":"horas"}`:`${a} ${a===1?"hora":"horas"} ${l} minutos`},b=async()=>{p.value=await ve()},x=async()=>{await xe({description:r.description,duration:r.duration}),v.success("Servicio agregado"),await b(),w()},h=async f=>{if(confirm("¿Estás seguro de que deseas eliminar este servicio?"))try{await be(f),v.success("Servicio eliminado"),await b()}catch(a){console.error("Error al eliminar el servicio:",a)}},w=()=>{r.description="",r.duration=0};return E(()=>{b()}),(f,a)=>(c(),u("div",mt,[e("div",pt,[a[8]||(a[8]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-6"},"Gestión de servicios",-1)),e("div",gt,[a[5]||(a[5]=e("h3",{class:"text-lg font-semibold mb-4"},"Agregar nuevo servicio",-1)),e("form",{onSubmit:G(x,["prevent"]),class:"space-y-4"},[e("div",vt,[e("div",null,[a[2]||(a[2]=e("label",{for:"serviceDescription",class:"block text-sm font-medium text-gray-700"},"Descripción del servicio",-1)),_(e("input",{type:"text",id:"serviceDescription","onUpdate:modelValue":a[0]||(a[0]=l=>r.description=l),class:"p-4 bg-white mt-1 block w-full rounded-md border border-gray-300 h-7 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:""},null,512),[[B,r.description]])]),e("div",null,[a[3]||(a[3]=e("label",{for:"serviceDuration",class:"block text-sm font-medium text-gray-700"},"Duración (minutos)",-1)),_(e("input",{type:"number",id:"serviceDuration","onUpdate:modelValue":a[1]||(a[1]=l=>r.duration=l),class:"p-4 bg-white mt-1 block w-full rounded-md border border-gray-300 h-7 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",required:"",min:"1"},null,512),[[B,r.duration]])])]),a[4]||(a[4]=e("div",{class:"flex justify-end"},[e("button",{type:"submit",class:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700"}," Agregar ")],-1))],32)]),e("div",null,[a[7]||(a[7]=e("h3",{class:"text-lg font-semibold mb-4"},"Lista de servicios",-1)),e("div",xt,[e("table",bt,[a[6]||(a[6]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Descripción"),e("th",{scope:"col",class:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Duración"),e("th",{scope:"col",class:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Acciones")])],-1)),e("tbody",yt,[(c(!0),u(T,null,M(p.value,l=>(c(),u("tr",{key:l.id},[e("td",ft,[e("div",ht,n(l.description),1)]),e("td",wt,n(m(l.duration)),1),e("td",_t,[e("button",{onClick:o=>h(l.id),class:"text-red-600 hover:text-red-900 border border-red-600 rounded-md px-2 py-1 text-xs sm:text-sm"}," Eliminar ",8,kt)])]))),128))])])])])])]))}}),Dt={class:"bg-white rounded-lg shadow-lg overflow-hidden mb-8"},Ct={class:"p-8"},Tt={class:"border-b border-gray-200 mb-6"},Mt={class:"-mb-px flex space-x-8"},Vt=["onClick"],St={key:0,class:"text-center py-8"},Bt={key:1,class:"text-center py-8"},At={class:"text-red-600"},Ht={key:2,class:"space-y-4 max-h-[600px] overflow-y-auto pr-2"},Nt={class:"flex justify-between items-start"},jt={class:"space-y-2"},Ut={class:"flex items-center space-x-2"},Et={class:"text-lg font-semibold text-gray-900"},Rt={class:"flex items-center text-gray-500"},zt={class:"flex items-center text-gray-500"},Pt={key:3,class:"text-center py-12"},qt={class:"mt-2 text-sm font-medium text-gray-900"},Ft={class:"mt-1 text-sm text-gray-500"},Lt=A({__name:"UserReservations",setup(H){const v=z(),p=$([]),r=$(!0),m=$(null),b=$("upcoming"),x=[{label:"Próximas",value:"upcoming"},{label:"Pasadas",value:"past"}],h=l=>{const[o,i,y]=l.split("-").map(Number);return new Date(y,i-1,o)},w=j(()=>{const l=new Date;return l.setHours(0,0,0,0),p.value.filter(o=>{const i=h(o.date);return i.setHours(0,0,0,0),b.value==="upcoming"?i>=l:i<l}).sort((o,i)=>{const y=h(o.date),S=h(i.date);return b.value==="upcoming"?y.getTime()-S.getTime():S.getTime()-y.getTime()})}),f=l=>{switch(l){case"confirmed":return"Confirmada";case"pending":return"Pendiente";case"completed":return"Completada";default:return l}},a=async()=>{var l;r.value=!0,m.value=null;try{if(!((l=v.user)!=null&&l.id))throw new Error("ID de usuario no encontrado");p.value=await ye(v.user.id)}catch(o){m.value=o instanceof Error?o.message:"Error cargando reservas"}finally{r.value=!1}};return E(a),(l,o)=>(c(),u("div",Dt,[e("div",Ct,[o[4]||(o[4]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-6"},"Mis Reservas",-1)),e("div",Tt,[e("nav",Mt,[(c(),u(T,null,M(x,i=>e("button",{key:i.value,onClick:y=>b.value=i.value,class:k(["whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm",b.value===i.value?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},n(i.label),11,Vt)),64))])]),r.value?(c(),u("div",St,o[0]||(o[0]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Cargando reservas...",-1)]))):m.value?(c(),u("div",Bt,[e("p",At,n(m.value),1),e("button",{onClick:a,class:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors"}," Reintentar ")])):w.value.length>0?(c(),u("div",Ht,[(c(!0),u(T,null,M(w.value,i=>(c(),u("div",{key:i.id,class:"border rounded-lg p-4 hover:shadow-md transition-shadow border-blue-200"},[e("div",Nt,[e("div",jt,[e("div",Ut,[e("h3",Et,n(i.serviceName),1),e("span",{class:k(["px-2 py-1 text-xs font-medium rounded-full",{"bg-green-100 text-green-800":i.status==="confirmed","bg-blue-100 text-blue-800":i.status==="completed","bg-red-100 text-red-800":i.status==="cancelled"}])},n(f(i.status)),3)]),e("div",Rt,[o[1]||(o[1]=e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e("span",null,n(d(P)(i.date)),1)]),e("div",zt,[o[2]||(o[2]=e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",null,n(i.time),1)])])])]))),128))])):(c(),u("div",Pt,[o[3]||(o[3]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1)),e("h3",qt," No hay reservas "+n(b.value==="upcoming"?"próximas":"pasadas"),1),e("p",Ft," No tienes ninguna reserva "+n(b.value==="upcoming"?"programada":"realizada")+". ",1)]))])]))}}),Gt={class:"bg-white rounded-lg shadow-lg overflow-hidden mb-8"},It={class:"p-8"},Qt={class:"border-b border-gray-200 mb-6"},Wt={class:"-mb-px flex space-x-8"},Jt=["onClick"],Ot={key:0,class:"text-center py-8"},Kt={key:1,class:"text-center py-8"},Xt={class:"text-red-600"},Yt={key:2,class:"space-y-4 max-h-[600px] overflow-y-auto pr-2"},Zt={class:"flex flex-col sm:flex-row justify-between items-start gap-4"},es={class:"flex items-center space-x-2"},ts={class:"text-lg font-semibold text-gray-900"},ss={class:"text-sm text-gray-500"},os={class:"flex flex-col items-end gap-2 w-full sm:w-auto"},rs={class:"flex items-center justify-end space-x-2"},as={class:"text-sm font-medium text-gray-900"},ls={class:"flex flex-col sm:flex-row items-end sm:items-center gap-2 text-sm text-gray-500"},ns={class:"flex items-center"},is={class:"flex items-center"},ds={class:"flex items-center"},us={key:3,class:"text-center py-12"},cs={class:"mt-2 text-sm font-medium text-gray-900"},ms={class:"mt-1 text-sm text-gray-500"},ps=A({__name:"ClientReservations",setup(H){const v=$([]),p=$(!0),r=$(null),m=$("upcoming"),b=[{label:"Próximas",value:"upcoming"},{label:"Pasadas",value:"past"}],x=a=>{const[l,o,i]=a.split("-").map(Number);return new Date(i,o-1,l)},h=j(()=>{const a=new Date;return a.setHours(0,0,0,0),v.value.filter(o=>{const i=x(o.date);i.setHours(0,0,0,0);const y=i>=a;return m.value==="upcoming"?y:!y}).sort((o,i)=>{const y=x(o.date),S=x(i.date);return m.value==="upcoming"?y.getTime()-S.getTime():S.getTime()-y.getTime()})}),w=a=>{switch(a){case"confirmed":return"Confirmada";case"pending":return"Pendiente";case"completed":return"Completada";case"cancelled":return"Cancelada";default:return a}},f=async()=>{try{p.value=!0,r.value=null,v.value=await fe()}catch(a){r.value=a instanceof Error?a.message:"Error al cargar las reservas"}finally{p.value=!1}};return E(()=>{f()}),(a,l)=>(c(),u("div",Gt,[e("div",It,[l[5]||(l[5]=e("h2",{class:"text-2xl font-bold text-gray-900 mb-6"},"Reservas de Clientes",-1)),e("div",Qt,[e("nav",Wt,[(c(),u(T,null,M(b,o=>e("button",{key:o.value,onClick:i=>m.value=o.value,class:k(["whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm",m.value===o.value?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},n(o.label),11,Jt)),64))])]),p.value?(c(),u("div",Ot,l[0]||(l[0]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Cargando reservas...",-1)]))):r.value?(c(),u("div",Kt,[e("p",Xt,n(r.value),1),e("button",{onClick:f,class:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors"}," Reintentar ")])):h.value.length>0?(c(),u("div",Yt,[(c(!0),u(T,null,M(h.value,o=>(c(),u("div",{key:o.id,class:"border border-blue-200 rounded-lg p-4 hover:shadow-md transition-shadow"},[e("div",Zt,[e("div",es,[V(F,{class:"h-10 w-10","full-name":"appointment.userName"}),e("div",null,[e("h3",ts,n(o.userName),1),e("p",ss,n(o.userEmail),1)])]),e("div",os,[e("div",rs,[e("span",as,n(o.serviceName),1),e("span",{class:k(["px-2 py-1 text-xs font-medium rounded-full whitespace-nowrap",{"bg-green-100 text-green-800":o.status==="confirmed","bg-blue-100 text-blue-800":o.status==="completed","bg-red-100 text-red-800":o.status==="cancelled"}])},n(w(o.status)),3)]),e("div",ls,[e("div",ns,[l[1]||(l[1]=e("svg",{class:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e("span",null,n(d(P)(o.date)),1)]),e("div",is,[l[2]||(l[2]=e("svg",{class:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",null,n(o.time),1)]),e("div",ds,[l[3]||(l[3]=e("svg",{class:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})],-1)),e("span",null,n(o.userPhone),1)])])])])]))),128))])):(c(),u("div",us,[l[4]||(l[4]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1)),e("h3",cs," No hay reservas "+n(m.value==="upcoming"?"próximas":"pasadas"),1),e("p",ms," No hay reservas "+n(m.value==="upcoming"?"programadas":"realizadas")+". ",1)]))])]))}}),gs={class:"min-h-screen bg-gray-100 py-12 px-4 sm:px-6 lg:px-8"},vs={class:"max-w-4xl mx-auto"},xs={key:0,class:"space-y-8"},_s=A({__name:"UserPage",setup(H){const{isAdmin:v}=z();return(p,r)=>(c(),u("div",gs,[e("div",vs,[d(v)?(c(),u("div",xs,[V(ps),V(ct),V($t)])):I("",!0),V(je),V(Lt)])]))}});export{_s as default};
